<div class="container">
    <div class="d-flex flex-column align-items-center justify-content-center">
        <h1 class="w-100 text-center mt-3 mb-1">Liturgia das Horas</h1>
        <p class="text-center mb-0" style="max-width: 600px;">
            Reze a Liturgia das Horas do dia {{ day }}, junto com toda a Santa Igreja!
        </p>
    </div>
</div>

<app-loader *ngIf="!loaded" class="w-100 d-flex justify-content-center my-3"></app-loader>

<div *ngIf="loaded" class="d-flex flex-column justify-content-center container my-3">
    <div #calendarContainer class="d-flex justify-content-center calendar-wrapper" style="position: relative;">
        <div class="d-flex align-items-center justify-content-center gap-2">
            <app-button [width]="'100%'" class="btn-hours" (click)="toggleCalendar()"
                [text]="selectedDate ? selectedDate.toLocaleDateString('pt-BR') : 'Selecionar data'"></app-button>

            <app-button [width]="'100%'" class="btn-hours" (click)="toggleLanguage()"
                [text]="language === 'pt_BR' ? 'Latim' : 'Português'"></app-button>
        </div>

        <div *ngIf="calendarVisible" class="calendar-popup p-3 rounded shadow">
            <div class="calendar-header d-flex justify-content-between align-items-center mb-3">
                <app-button [text]="'&lt;'" (click)="prevMonth()"></app-button>
                <h5 class="mb-0 text-center">{{ monthName }} {{ currentYear }}</h5>
                <app-button [text]="'&gt;'" (click)="nextMonth()"></app-button>
            </div>

            <div class="calendar-grid">
                <div class="day-name" *ngFor="let d of weekDays">{{ d }}</div>
                <div class="day-cell" *ngFor="let day of calendarDays"
                    [class.selected]="selectedDate && day.date && day.date.toDateString() === selectedDate.toDateString()"
                    (click)="selectDate(day)">
                    {{ day.date ? day.date.getDate() : '' }}
                </div>
            </div>
        </div>
    </div>

    <div class="d-flex justify-content-center gap-2 flex-wrap mb-3 mt-3">
        <app-button [width]="'100%'" class="btn-hours" (click)="changePart('oficio_leitura', 'Ofício')" [text]="'Ofício'"></app-button>
        <app-button [width]="'100%'" class="btn-hours" (click)="changePart('laudes', 'Laudes')" [text]="'Laudes'"></app-button>
        <app-button [width]="'100%'" class="btn-hours" (click)="changePart('tercia', 'Tércia')" [text]="'Tércia'"></app-button>
        <app-button [width]="'100%'" class="btn-hours" (click)="changePart('sexta', 'Sexta')" [text]="'Sexta'"></app-button>
        <app-button [width]="'100%'" class="btn-hours" (click)="changePart('noa', 'Noa')" [text]="'Noa'"></app-button>
        <app-button [width]="'100%'" class="btn-hours" (click)="changePart('vesperas', 'Vésperas')" [text]="'Vésperas'"></app-button>
        <app-button [width]="'100%'" class="btn-hours" (click)="changePart('completas', 'Completas')" [text]="'Completas'"></app-button>
    </div>

    <h3 class="text-center mt-4">{{ selectedTab }}</h3>
    <div *ngIf="safeLiturgyHtml" class="mt-4 ql-editor content-lectio" [innerHTML]="safeLiturgyHtml"></div>
    <p *ngIf="!safeLiturgyHtml" class="text-center">- Nenhum conteúdo encontrado -</p>
</div>